<div
  class="max-w-5xl mx-auto mt-8 p-6 bg-white shadow rounded-lg border border-gray-200"
>
  <!-- Coluna principal -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <div class="lg:col-span-2 flex flex-col justify-between">
      <!-- Header -->
      <div class="flex items-center justify-between mb-6 gap-4">
        <h2 class="text-xl font-semibold text-gray-800">Detalhes do Motorista</h2>
        <button
          class="px-4 py-2 text-sm font-medium text-white bg-gray-700 rounded hover:bg-gray-600"
          (click)="goBack()"
        >
          Voltar
        </button>
      </div>

      <!-- Conteúdo -->
      <div class="flex-1">
        @if (driver) {
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <div>
            <label
              class="block text-xs font-semibold text-gray-500 uppercase mb-1"
              >Nome</label
            >
            <p class="text-gray-800 text-sm">{{ driver.name }}</p>
          </div>
          <div>
            <label
              class="block text-xs font-semibold text-gray-500 uppercase mb-1"
              >CPF</label
            >
            <p class="text-gray-800 text-sm">{{ driver.cpf }}</p>
          </div>
          <div>
            <label
              class="block text-xs font-semibold text-gray-500 uppercase mb-1"
              >CNH</label
            >
            <p class="text-gray-800 text-sm">{{ driver.cnh }}</p>
          </div>
          <div>
            <label
              class="block text-xs font-semibold text-gray-500 uppercase mb-1"
              >Categoria CNH</label
            >
            <p class="text-gray-800 text-sm">{{ driver.cnhCategory }}</p>
          </div>
          <div>
            <label
              class="block text-xs font-semibold text-gray-500 uppercase mb-1"
              >Validade CNH</label
            >
            <p class="text-gray-800 text-sm">
              {{ driver.cnhExpiration | date : "dd/MM/yyyy" }}
            </p>
          </div>
          <div>
            <label
              class="block text-xs font-semibold text-gray-500 uppercase mb-1"
              >Status</label
            >
            <span
              class="px-3 py-1 rounded-full text-xs font-medium"
              [class.bg-green-100]="driver.status === 'ATIVO'"
              [class.text-green-700]="driver.status === 'ATIVO'"
              [class.bg-red-100]="driver.status === 'INATIVO'"
              [class.text-red-700]="driver.status === 'INATIVO'"
            >
              {{ driver.status }}
            </span>
          </div>
          <div>
            <label
              class="block text-xs font-semibold text-gray-500 uppercase mb-1"
              >Email</label
            >
            <p class="text-gray-800 text-sm">{{ driver.email || "-" }}</p>
          </div>
          <div>
            <label
              class="block text-xs font-semibold text-gray-500 uppercase mb-1"
              >Telefone</label
            >
            <p class="text-gray-800 text-sm">{{ driver.phone || "-" }}</p>
          </div>
        </div>
        } @else {
        <p class="text-gray-500 text-sm italic">Carregando motorista...</p>
        }
      </div>

      <!-- Rodapé com botões -->
      @if(driver && driver.status === 'ATIVO') {
      <div class="mt-6 border-t border-gray-200 pt-4 flex justify-end">
        <button
          class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded"
          (click)="disableDriver()"
          [disabled]="loading"
        >
          @if(loading) { Aguardando... } @else { Desabilitar Motorista }
        </button>
      </div>
      } @if(driver && driver.status === 'INATIVO') {
      <div class="mt-6 border-t border-gray-200 pt-4 flex justify-end">
        <button
          class="px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded"
          (click)="activateDriver()"
          [disabled]="loading"
        >
          @if(loading) { Aguardando... } @else { Ativar Motorista }
        </button>
      </div>
      }
    </div>

    <div class="hidden lg:flex items-center justify-center">
      <img
        src="driver-detail.png"
        alt="Ilustração de motorista"
        class="max-h-64 opacity-90"
        style="filter: drop-shadow(4px 4px 8px rgba(0, 0, 0, 0.25))"
      />
    </div>
  </div>

  <!-- Veículos utilizados -->
  <div class="mt-10 border-t border-gray-200 pt-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">
      Veículos utilizados
    </h3>

    <div class="flex-1 overflow-y-auto">
      <app-base-list
        [columns]="vehiclesColumns"
        [data]="vehicles"
        (rowClick)="onVehicleSelect($event)"
        [showActions]="false"
      ></app-base-list>
    </div>

    <!-- Paginação -->
    <div class="border-t border-gray-200 pt-3 flex justify-end">
      <app-paginator
        [totalItems]="vehiclesTotal"
        [itemsPerPage]="vehiclesLimit"
        [totalPages]="vehiclesTotalPages"
        [page]="vehiclesPage"
        (pageChanged)="onVehiclesPageChange($event)"
      ></app-paginator>
    </div>
  </div>

  <!-- Despesas relacionadas -->
  <div class="mt-10 border-t border-gray-200 pt-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">
      Despesas relacionadas
    </h3>

    <div class="flex-1 overflow-y-auto">
      <app-base-list
        [columns]="expensesColumns"
        [data]="expenses"
        (rowClick)="onExpenseSelect($event)"
        [showActions]="false"
      ></app-base-list>
    </div>

    <!-- Paginação -->
    <div class="border-t border-gray-200 pt-3 flex justify-end">
      <app-paginator
        [totalItems]="expensesTotal"
        [itemsPerPage]="expensesLimit"
        [totalPages]="expensesTotalPages"
        [page]="expensesPage"
        (pageChanged)="onExpensesPageChange($event)"
      ></app-paginator>
    </div>
  </div>
</div>
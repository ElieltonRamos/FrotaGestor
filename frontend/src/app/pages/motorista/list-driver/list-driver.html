<div class="overflow-x-auto overflow-y-auto">
  <!-- Filtros e Paginador -->
  <div class="flex flex-wrap justify-between mb-4 gap-4">
    <!-- Filtros -->
    <div class="flex flex-wrap gap-4 items-end">
      <!-- Nome -->
      <div class="flex flex-col">
        <label class="text-sm mb-1">Nome</label>
        <input
          type="text"
          placeholder="Nome..."
          class="px-3 py-2 rounded border bg-gray-50 text-sm"
          [(ngModel)]="filter.name"
        />
      </div>

      <!-- CPF -->
      <div class="flex flex-col">
        <label class="text-sm mb-1">CPF</label>
        <input
          type="text"
          placeholder="CPF..."
          class="px-3 py-2 rounded border bg-gray-50 text-sm"
          [(ngModel)]="filter.cpf"
        />
      </div>

      <!-- Status -->
      <div class="flex flex-col">
        <label class="text-sm mb-1">Status</label>
        <select
          class="px-3 py-2 rounded border bg-gray-50 text-sm"
          [(ngModel)]="filter.status"
        >
          <option value="ATIVO">Ativo</option>
          <option value="INATIVO">Inativo</option>
        </select>
      </div>

      <!-- Botões de ação -->
      <div class="flex flex-col gap-2">
        <label class="text-sm mb-1 invisible">.</label>
        <div class="flex gap-2">
          <button
            class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-500 text-sm"
            (click)="applyFilters()"
          >
            Filtrar
          </button>
          <button
            class="px-4 py-2 bg-gray-700 text-white rounded hover:bg-gray-600 text-sm"
            (click)="clearFilters()"
          >
            Limpar
          </button>
        </div>
      </div>
    </div>

    <!-- Paginador -->
    <app-paginator
      [totalItems]="total"
      [itemsPerPage]="limit"
      [totalPages]="totalPages"
      [page]="page"
      (pageChanged)="onPageChange($event)"
    ></app-paginator>
  </div>

  <!-- Dica -->
  <div class="text-gray-500 text-xs italic mb-2 select-none">
    Clique no cabeçalho das colunas para ordenar (▲ ascendente, ▼ descendente).
  </div>

  <!-- Tabela -->
  <div class="overflow-hidden rounded-lg border border-gray-200 shadow-sm">
    <table class="min-w-full text-sm">
      <thead class="bg-gray-200 text-gray-700 uppercase text-xs font-semibold">
        <tr>
          <th
            class="px-4 py-3 cursor-pointer select-none"
            (click)="sortBy('name')"
          >
            Nome @if(sortKey === 'name') { {{ sortAsc ? "▲" : "▼" }} }
          </th>
          <th
            class="px-4 py-3 cursor-pointer select-none"
            (click)="sortBy('cpf')"
          >
            CPF @if(sortKey === 'cpf') { {{ sortAsc ? "▲" : "▼" }} }
          </th>
          <th
            class="px-4 py-3 cursor-pointer select-none"
            (click)="sortBy('cnh')"
          >
            CNH @if(sortKey === 'cnh') { {{ sortAsc ? "▲" : "▼" }} }
          </th>
          <th
            class="px-4 py-3 cursor-pointer select-none"
            (click)="sortBy('cnh')"
          >
            Categoria CNH @if(sortKey === 'cnhCategory') { {{ sortAsc ? "▲" : "▼" }} }
          </th>
          <th
            class="px-4 py-3 cursor-pointer select-none"
            (click)="sortBy('cnh')"
          >
            Validade CNH @if(sortKey === 'cnhExpiration') { {{ sortAsc ? "▲" : "▼" }} }
          </th>
          <th
            class="px-4 py-3 cursor-pointer select-none"
            (click)="sortBy('status')"
          >
            Status @if(sortKey === 'status') { {{ sortAsc ? "▲" : "▼" }} }
          </th>
          <th class="px-4 py-3 text-center">Ações</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-100">
        @for (m of drivers; track m.id) {
        <tr class="hover:bg-gray-50 odd:bg-white even:bg-gray-50">
          <td class="px-4 py-3">{{ m.name }}</td>
          <td class="px-4 py-3">{{ m.cpf }}</td>
          <td class="px-4 py-3">{{ m.cnh }}</td>
          <td class="px-4 py-3">{{ m.cnhCategory }}</td>
          <td class="px-4 py-3">{{ m.cnhExpiration | date:'dd/MM/yyyy' }}</td>
          <td class="px-4 py-3">
            <span
              class="px-2 py-1 text-xs rounded-full"
              [class.bg-green-100]="m.status === 'ATIVO'"
              [class.text-green-700]="m.status === 'ATIVO'"
              [class.bg-red-100]="m.status === 'INATIVO'"
              [class.text-red-700]="m.status === 'INATIVO'"
            >
              {{ m.status }}
            </span>
          </td>
          <td class="px-4 py-3 text-center space-x-2">
            <button
              class="px-3 py-1 text-xs font-medium text-white bg-blue-600 rounded hover:bg-blue-700"
              (click)="onEdit(m)"
            >
              Editar
            </button>
            <button
              class="px-3 py-1 text-xs font-medium text-white bg-gray-600 rounded hover:bg-gray-700"
              (click)="onNavDetails(m.id)"
            >
              Detalhes
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>

    <app-modal-edit-component
      [title]="'Editar Motorista'"
      [show]="showModal"
      [entity]="selectedDriver"
      [fields]="driverFields"
      (close)="onCloseModal()"
      (save)="onSaveModal($event)"
    ></app-modal-edit-component>
  </div>
</div>

<div
  class="max-w-5xl mx-auto mt-8 p-6 bg-white shadow rounded-lg border border-gray-200 grid grid-cols-1 lg:grid-cols-3 gap-8"
>
  <!-- Coluna principal -->
  <div class="lg:col-span-2 flex flex-col justify-between min-h-[500px]">
    <!-- Header -->
    <div class="flex items-center justify-between mb-6 gap-4">
      <h2 class="text-xl font-semibold text-gray-800">Detalhes da Viagem</h2>
      <button
        class="px-4 py-2 text-sm font-medium text-white bg-gray-700 rounded hover:bg-gray-600"
        (click)="goBack()"
      >
        Voltar
      </button>
    </div>

    <!-- Conteúdo -->
    <div class="flex-1">
      @if (trip) {
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >ID</label
          >
          <p class="text-gray-800 text-sm">
            @if (trip.id) {
            <a
              class="cursor-pointer hover:underline"
              (click)="navigateToTrip()"
            >
              {{ trip.id }}
            </a>
            } @else {
            {{ trip.id || "-" }}
            }
          </p>
        </div>
        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >Veículo</label
          >
          <p class="text-gray-800 text-sm">
            @if (trip.vehicleId) {
            <a
              class="cursor-pointer hover:underline"
              (click)="navigateToVehicle()"
            >
              {{ trip.vehiclePlate || "-" }}
            </a>
            } @else {
            {{ trip.vehiclePlate || "-" }}
            }
          </p>
        </div>

        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >Motorista</label
          >
          <p class="text-gray-800 text-sm">
            @if (trip.driverId) {
            <a
              class="cursor-pointer hover:underline"
              (click)="navigateToDriver()"
            >
              {{ trip.driverName || "-" }}
            </a>
            } @else {
            {{ trip.driverName || "-" }}
            }
          </p>
        </div>

        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >Local de Partida</label
          >
          <p class="text-gray-800 text-sm">{{ trip.startLocation || "-" }}</p>
        </div>

        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >Local de Chegada</label
          >
          <p class="text-gray-800 text-sm">{{ trip.endLocation || "-" }}</p>
        </div>

        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >Início</label
          >
          <p class="text-gray-800 text-sm">
            {{ trip.startTime | date : "dd/MM/yyyy HH:mm" }}
          </p>
        </div>

        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >Fim</label
          >
          <p class="text-gray-800 text-sm">
            {{
              trip.endTime ? (trip.endTime | date : "dd/MM/yyyy HH:mm") : "-"
            }}
          </p>
        </div>

        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >Distância (Km)</label
          >
          <p class="text-gray-800 text-sm">{{ trip.distanceKm || "-" }}</p>
        </div>

        <div>
          <label
            class="block text-xs font-semibold text-gray-500 uppercase mb-1"
            >Status</label
          >
          <span
            class="px-3 py-1 rounded-full text-xs font-medium"
            [class.bg-yellow-100]="trip.status === 'PLANEJADA'"
            [class.text-yellow-700]="trip.status === 'PLANEJADA'"
            [class.bg-blue-100]="trip.status === 'EM_ANDAMENTO'"
            [class.text-blue-700]="trip.status === 'EM_ANDAMENTO'"
            [class.bg-green-100]="trip.status === 'CONCLUIDA'"
            [class.text-green-700]="trip.status === 'CONCLUIDA'"
            [class.bg-red-100]="trip.status === 'CANCELADA'"
            [class.text-red-700]="trip.status === 'CANCELADA'"
          >
            {{ trip.status }}
          </span>
        </div>
      </div>
      } @else {
      <p class="text-gray-500 text-sm italic">Carregando viagem...</p>
      }
    </div>

    <!-- Rodapé com botões -->
    @if(trip && trip.status === 'PLANEJADA') {
    <div class="mt-8 pt-4 border-t border-gray-200 flex justify-end gap-2">
      <button
        class="px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded"
        (click)="startTrip()"
        [disabled]="loading"
      >
        @if(loading) { Aguardando... } @else { Iniciar Viagem }
      </button>
      <button
        class="px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded"
        (click)="cancelTrip()"
        [disabled]="loading"
      >
        @if(loading) { Aguardando... } @else { Cancelar Viagem }
      </button>
    </div>
    } @if(trip && trip.status === 'EM_ANDAMENTO') {
    <div class="mt-8 pt-4 border-t border-gray-200 flex justify-end">
      <button
        class="px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded"
        (click)="finishTrip()"
        [disabled]="loading"
      >
        @if(loading) { Aguardando... } @else { Concluir Viagem }
      </button>
    </div>
    }
  </div>

  <!-- Coluna lateral com imagem ilustrativa -->
  <div class="hidden lg:flex items-center justify-center">
    <img
      src="details-trip.png"
      alt="Ilustração de viagem"
      class="max-h-68 opacity-90 custom-shadow-img"
    />
  </div>
</div>
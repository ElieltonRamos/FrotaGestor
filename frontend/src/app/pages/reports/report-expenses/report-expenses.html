<div class="p-6 space-y-10 bg-gray-50 min-h-screen">
  <!-- Filtros -->
  <section>
    <h2 class="text-xl font-semibold text-gray-700 mb-4">Filtros</h2>
    <div class="bg-white border border-gray-200 shadow-md rounded-xl p-4">
      <app-base-filter
        [filtersConfig]="expenseFilters"
        [(filter)]="filter"
        (apply)="applyFilters()"
        (clear)="clearFilters()"
      ></app-base-filter>
    </div>
  </section>

  <!-- Indicadores -->
  <section>
    <h2 class="text-xl font-semibold text-gray-700 mb-4">
      Indicadores de Despesas
    </h2>
    <p class="text-sm text-gray-500 mb-4">
      Período: {{ filter.startDate | date : "dd/MM/yyyy" }} -
      {{ filter.endDate | date : "dd/MM/yyyy" }}
    </p>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      <!-- Total de Despesas (Valor) -->
      <div
        class="bg-blue-100 border border-blue-300 shadow-md rounded-xl p-5 flex flex-col justify-between hover:shadow-lg transition-transform hover:scale-[1.02]"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-blue-700"
            >Total Gasto (R$)</span
          >
          <i data-lucide="dollar-sign" class="text-blue-500 w-5 h-5"></i>
        </div>
        <div class="mt-3 text-3xl font-bold text-blue-800">
          @if (loadingIndicators) {
          <div
            class="w-6 h-6 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mx-auto"
          ></div>
          } @else {
          {{ expenseReport.summary.totalAmount | number : "1.2-2" }}
          }
        </div>
      </div>

      <!-- Total de Despesas (Contagem) -->
      <div
        class="bg-green-100 border border-green-300 shadow-md rounded-xl p-5 flex flex-col justify-between hover:shadow-lg transition-transform hover:scale-[1.02]"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-green-700"
            >Nº de Despesas</span
          >
          <i data-lucide="list" class="text-green-500 w-5 h-5"></i>
        </div>
        <div class="mt-3 text-3xl font-bold text-green-800">
          @if (loadingIndicators) {
          <div
            class="w-6 h-6 border-4 border-green-400 border-t-transparent rounded-full animate-spin mx-auto"
          ></div>
          } @else {
          {{ expenseReport.summary.totalCount }}
          }
        </div>
      </div>

      <!-- Média por Despesa -->
      <div
        class="bg-yellow-100 border border-yellow-300 shadow-md rounded-xl p-5 flex flex-col justify-between hover:shadow-lg transition-transform hover:scale-[1.02]"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-yellow-700"
            >Média por Despesa (R$)</span
          >
          <i data-lucide="bar-chart" class="text-yellow-500 w-5 h-5"></i>
        </div>
        <div class="mt-3 text-3xl font-bold text-yellow-800">
          @if (loadingIndicators) {
          <div
            class="w-6 h-6 border-4 border-yellow-400 border-t-transparent rounded-full animate-spin mx-auto"
          ></div>
          } @else {
          {{ expenseReport.summary.avgExpenseAmount | number : "1.2-2" }}
          }
        </div>
      </div>

      <!-- Tipo Mais Caro -->
      <div
        class="bg-red-100 border border-red-300 shadow-md rounded-xl p-5 flex flex-col justify-between hover:shadow-lg transition-transform hover:scale-[1.02]"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-red-700">Tipo Mais Caro</span>
          <i data-lucide="alert-triangle" class="text-red-500 w-5 h-5"></i>
        </div>
        <div class="mt-3">
          @if (loadingIndicators) {
          <div
            class="w-6 h-6 border-4 border-red-400 border-t-transparent rounded-full animate-spin mx-auto"
          ></div>
          } @else if (expenseReport.summary.topExpenseType) {
          <div class="font-bold text-lg text-red-800">
            {{ expenseReport.summary.topExpenseType.type }}
          </div>
          <div class="text-sm text-red-700">
            R$
            {{
              expenseReport.summary.topExpenseType.totalAmount
                | number : "1.2-2"
            }}
          </div>
          } @else {
          <div class="text-sm text-red-400">Nenhum dado</div>
          }
        </div>
      </div>

      <!-- Veículo com Maior Gasto -->
      <div
        class="bg-teal-100 border border-teal-300 shadow-md rounded-xl p-5 flex flex-col justify-between hover:shadow-lg transition-transform hover:scale-[1.02]"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-teal-700"
            >Veículo Com Mais Despesas Cadastradas</span
          >
          <i data-lucide="truck" class="text-teal-500 w-5 h-5"></i>
        </div>
        <div class="mt-3">
          @if (loadingIndicators) {
          <div
            class="w-6 h-6 border-4 border-teal-400 border-t-transparent rounded-full animate-spin mx-auto"
          ></div>
          } @else if (expenseReport.summary.topVehicleByAmount) {
          <div class="font-bold text-lg text-teal-800">
            {{ expenseReport.summary.topVehicleByAmount.plate }}
          </div>
          <div class="text-sm text-teal-700">
            R$
            {{
              expenseReport.summary.topVehicleByAmount.amount | number : "1.2-2"
            }}
          </div>
          } @else {
          <div class="text-sm text-teal-400">Nenhum dado</div>
          }
        </div>
      </div>

      <!-- Motorista com Maior Gasto -->
      <div
        class="bg-orange-100 border border-orange-300 shadow-md rounded-xl p-5 flex flex-col justify-between hover:shadow-lg transition-transform hover:scale-[1.02]"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-orange-700"
            >Motorista Com Mais Despesas Cadastradas</span
          >
          <i data-lucide="user" class="text-orange-500 w-5 h-5"></i>
        </div>
        <div class="mt-3">
          @if (loadingIndicators) {
          <div
            class="w-6 h-6 border-4 border-orange-400 border-t-transparent rounded-full animate-spin mx-auto"
          ></div>
          } @else if (expenseReport.summary.topDriverByAmount) {
          <div class="font-bold text-lg text-orange-800">
            {{ expenseReport.summary.topDriverByAmount.name }}
          </div>
          <div class="text-sm text-orange-700">
            R$
            {{
              expenseReport.summary.topDriverByAmount.amount | number : "1.2-2"
            }}
          </div>
          } @else {
          <div class="text-sm text-orange-400">Nenhum dado</div>
          }
        </div>
      </div>

      <!-- Última Despesa -->
      <div
        class="bg-purple-100 border border-purple-300 shadow-md rounded-xl p-5 flex flex-col justify-between hover:shadow-lg transition-transform hover:scale-[1.02] col-span-1 sm:col-span-2 lg:col-span-2"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-purple-700"
            >Última Despesa</span
          >
          <i data-lucide="clock" class="text-purple-500 w-5 h-5"></i>
        </div>
        <div class="mt-3">
          @if (loadingIndicators) {
          <div
            class="w-6 h-6 border-4 border-purple-400 border-t-transparent rounded-full animate-spin mx-auto"
          ></div>
          } @else if (expenseReport.summary.lastExpense) {
          <div class="font-bold text-lg text-purple-800">
            {{ expenseReport.summary.lastExpense.type }}
          </div>
          <div class="text-sm text-purple-700">
            R$ {{ expenseReport.summary.lastExpense.amount | number : "1.2-2" }}
          </div>
          <div class="text-sm text-purple-700">
            {{ expenseReport.summary.lastExpense.date | date : "dd/MM/yyyy" }}
          </div>
          } @else {
          <div class="text-sm text-purple-400">Nenhum dado</div>
          }
        </div>
      </div>
    </div>
  </section>

  <!-- Distribuições -->
  <section>
    <h2 class="text-xl font-semibold text-gray-700 mb-1">Distribuições</h2>
    <p class="text-sm text-gray-500 mb-4">
      Período: {{ filter.startDate | date : "dd/MM/yyyy" }} -
      {{ filter.endDate | date : "dd/MM/yyyy" }}
    </p>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6">
      <!-- Gráfico: Despesas por Tipo -->
      <div
        class="bg-fuchsia-100 border border-fuchsia-300 shadow-md rounded-xl p-5 hover:shadow-lg transition"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-fuchsia-700">Por Tipo</span>
          <i data-lucide="pie-chart" class="text-fuchsia-500 w-5 h-5"></i>
        </div>
        <div class="mt-3 h-64">
          <canvas
            baseChart
            [data]="typeChartData"
            [options]="typeChartOptions"
            [type]="'pie'"
          ></canvas>
        </div>
      </div>

      <!-- Gráfico: Despesas por Veículo -->
      <div
        class="bg-orange-100 border border-orange-300 shadow-md rounded-xl p-5 hover:shadow-lg transition"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-orange-700">Por Veículo</span>
          <i data-lucide="truck" class="text-orange-500 w-5 h-5"></i>
        </div>
        <div class="mt-3 h-64">
          <canvas
            baseChart
            [data]="vehicleChartData"
            [options]="vehicleChartOptions"
            [type]="'bar'"
          ></canvas>
        </div>
      </div>

      <!-- Gráfico: Despesas por Motorista -->
      <div
        class="bg-teal-100 border border-teal-300 shadow-md rounded-xl p-5 hover:shadow-lg transition"
      >
        <div class="flex items-center justify-between">
          <span class="text-sm font-semibold text-teal-700">Por Motorista</span>
          <i data-lucide="user" class="text-teal-500 w-5 h-5"></i>
        </div>
        <div class="mt-3 h-64">
          <canvas
            baseChart
            [data]="driverChartData"
            [options]="driverChartOptions"
            [type]="'bar'"
          ></canvas>
        </div>
      </div>
    </div>
  </section>
</div>
